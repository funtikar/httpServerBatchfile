
<html>
  <head>
    <title>List View App</title>
  </head>
  <body>
    <div id="list-view"></div>
    <audio id="notification-sound" src="https://download.samplelib.com/mp3/sample-3s.mp3"></audio>
    <button id="stop-button">Stop Sound</button>
    <script>
      const apiKey = "keyEZU6tfrlFTpSta";
      const apiUrl =
        "https://api.airtable.com/v0/appwFb0aniUzAcNEi/Table%201?maxRecords=99&view=Grid%20view";
      let notificationSound;

      function updateListView() {
        fetch(apiUrl, {
          headers: {
            Authorization: `Bearer ${apiKey}`,
          },
        })
          .then((response) => response.json())
          .then((data) => {
            const records = data.records;
            const listItems = records.map((record) => {
              const name = record.fields.Name;
              const message = record.fields.Message;
              return `<li>${name}: ${message}</li>`;
            });
            document.getElementById("list-view").innerHTML = listItems.join("");
            notificationSound = new Audio(
              document.getElementById("notification-sound").src
            );
            notificationSound.play();
          });
      }

      setInterval(updateListView, 1000);

      document.getElementById("stop-button").addEventListener("click", () => {
        notificationSound.pause();
      });
    </script>
  </body>
</html>
